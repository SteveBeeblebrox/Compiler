#!/usr/bin/bash
var _a,_b,_c,_d,_e,__runInitializers=this&&this.__runInitializers||function(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0},__esDecorate=this&&this.__esDecorate||function(e,t,r,n,s,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f=!1,d=r.length-1;d>=0;d--){var p={};for(var g in n)p[g]="access"===g?{}:n[g];for(var g in n.access)p.access[g]=n.access[g];p.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var m=(0,r[d])("accessor"===l?{get:h.get,set:h.set}:h[c],p);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(h.get=a),(a=o(m.set))&&(h.set=a),(a=o(m.init))&&s.unshift(a)}else(a=o(m))&&("field"===l?s.unshift(a):h[c]=a)}u&&Object.defineProperty(u,n.name,h),f=!0},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};"object"!=typeof globalThis&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),null!==(_a=Symbol.dispose)&&void 0!==_a||(Symbol.dispose=Symbol("dispose")),null!==(_b=Symbol.asyncDispose)&&void 0!==_b||(Symbol.asyncDispose=Symbol("asyncDispose")),null!==(_c=globalThis.system)&&void 0!==_c||(globalThis.system={args:process.argv.slice(1),exit:process.exit,readTextFileSync:e=>require("fs").readFileSync(e,{encoding:"utf8"}),writeTextFileSync(e,t){require("fs").writeFileSync(e,t,{encoding:"utf8"})},readFileSync:e=>require("fs").readFileSync(e),writeFileSync(e,t){require("fs").writeFileSync(e,t)},async createTextFileReadStream(e){const t=require("fs").createReadStream(e,{encoding:"utf8"});return await new Promise((function(e,r){t.on("readable",e),t.on("error",r)})),t[Symbol.dispose]=()=>{},t},async createTextFileWriteStream(e){const t=require("fs").createWriteStream(e,{encoding:"utf8"});return t[Symbol.dispose]=()=>{},t}}),null!==(_d=system.createTextFileReadStream)&&void 0!==_d||(system.createTextFileReadStream=async function(e){const t=system.openSync(e,{read:!0});return{read(e){const r=new Uint8Array(e);return t.readSync(r),(new TextDecoder).decode(r)},[Symbol.dispose](){t.close()}}}),null!==(_e=system.createTextFileWriteStream)&&void 0!==_e||(system.createTextFileWriteStream=async function(e){const t=system.openSync(e,{write:!0,create:!0});return{write(e){t.writeSync((new TextEncoder).encode(e))},[Symbol.dispose](){t.close()}}});const throws=e=>{throw e};function installPolyfill(e,t,r=!1){for(const[n,s]of Object.entries(t))n in e.prototype||Object.defineProperty(e.prototype,n,{value:s,configurable:r})}var ArrayPolyfill,ArrayConstructorPolyfill,AsyncIteratorPolyfill,AsyncIteratorShiftPolyfill,IteratorPolyfill,IteratorShiftPolyfill,ObjectPolyfill,ObjectConstructorPolyfill,SetPolyfill,InPlaceSetPolyfill,LZCompression,Signature;!function(e){e.at=function(e){if((e*=1)>=0)return this[e];if(e<0)return this[this.length+e];throw new TypeError("Argument to at() is not a number")},e.flat=function e(t=1){return t?Array.prototype.reduce.call(this,(function(r,n){return Array.isArray(n)?r.push.apply(r,e.call(n,t-1)):r.push(n),r}),[]):Array.prototype.slice.call(this)},e.flatMap=function(e,t){return Array.prototype.map.call(this,e,t).flat()}}(ArrayPolyfill||(ArrayPolyfill={})),installPolyfill(Array,ArrayPolyfill),function(e){e.entries=function(e){return Array.prototype.map.apply(e,[(e,t)=>[t,e]])}}(ArrayConstructorPolyfill||(ArrayConstructorPolyfill={})),installPolyfill({prototype:Array},ArrayConstructorPolyfill),function(e){const t=Symbol();e.map=async function*(e){let t=0;for await(const r of this)yield e(r,t),t++},e.filter=async function*(e){let t=0;for await(const r of this)e(r,t)&&(yield r),t++},e.take=async function*(e){let t=0;for await(const r of this){if(t>=e)break;yield r,t++}},e.drop=async function*(e){let t=0;for await(const r of this)t>=e&&(yield r),t++},e.flatMap=async function*(e){let t=0;for await(const r of this)yield*e(r,t),t++},e.reduce=async function(e,r=t){let n=r,s=0;for await(const r of this)n!==t?(n=e(n,r,s),s++):n=r;if(n===t)throw new TypeError("Must specify an initialValue if the iterable is empty.");return n},e.toArray=async function(){const e=[];for await(const t of this)e.push(t);return e},e.forEach=async function(e){let t=0;for await(const r of this)e(r,t),t++},e.some=async function(e){let t=0;for await(const r of this){if(e(r,t))return!0;t++}return!1},e.every=async function(e){let t=0;for await(const r of this){if(!e(r,t))return!1;t++}return!0},e.find=async function(e){let t=0;for await(const r of this){if(e(r,t))return r;t++}}}(AsyncIteratorPolyfill||(AsyncIteratorPolyfill={})),installPolyfill({prototype:Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}.prototype))},AsyncIteratorPolyfill),function(e){e.shift=function(e){return void 0!==e?async function*(){for(let t=0;t<e;t++)yield this.shift()}.apply(this):(async()=>(await this.next()).value)()}}(AsyncIteratorShiftPolyfill||(AsyncIteratorShiftPolyfill={})),installPolyfill({prototype:Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}.prototype))},AsyncIteratorShiftPolyfill),function(e){const t=Symbol();e.map=function*(e){let t=0;for(const r of this)yield e(r,t),t++},e.filter=function*(e){let t=0;for(const r of this)e(r,t)&&(yield r),t++},e.take=function*(e){let t=0;for(const r of this){if(t>=e)break;yield r,t++}},e.drop=function*(e){let t=0;for(const r of this)t>=e&&(yield r),t++},e.flatMap=function*(e){let t=0;for(const r of this)yield*e(r,t),t++},e.reduce=function(e,r=t){let n=r,s=0;for(const r of this)n!==t?(n=e(n,r,s),s++):n=r;if(n===t)throw new TypeError("Must specify an initialValue if the iterable is empty.");return n},e.toArray=function(){const e=[];for(const t of this)e.push(t);return e},e.forEach=function(e){let t=0;for(const r of this)e(r,t),t++},e.some=function(e){let t=0;for(const r of this){if(e(r,t))return!0;t++}return!1},e.every=function(e){let t=0;for(const r of this){if(!e(r,t))return!1;t++}return!0},e.find=function(e){let t=0;for(const r of this){if(e(r,t))return r;t++}},e.toAsync=async function*(){yield*this}}(IteratorPolyfill||(IteratorPolyfill={})),installPolyfill({prototype:Object.getPrototypeOf(Object.getPrototypeOf(function*(){}.prototype))},IteratorPolyfill),function(e){e.shift=function(e){return void 0!==e?function*(){for(let t=0;t<e;t++)yield this.shift()}.apply(this):this.next().value}}(IteratorShiftPolyfill||(IteratorShiftPolyfill={})),installPolyfill({prototype:Object.getPrototypeOf(Object.getPrototypeOf(function*(){}.prototype))},IteratorShiftPolyfill),ObjectPolyfill||(ObjectPolyfill={}),installPolyfill(Object,ObjectPolyfill),function(e){e.groupBy=function(e,t){return e.reduce(((e,r,n)=>{var s;const i=t(r,n);return e[i]=[...null!==(s=e[i])&&void 0!==s?s:[],r],e}),{})},e.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(ObjectConstructorPolyfill||(ObjectConstructorPolyfill={})),installPolyfill({prototype:Object},ObjectConstructorPolyfill),function(e){function t(e){if(!function(e){if(null===e)return!1;const t=typeof e;return"object"===t||"function"===t}(e))throw new TypeError;const t=e.size,r=Number(t);if(Number.isNaN(r))throw new TypeError;if("function"!=typeof e.has)throw new TypeError;if("function"!=typeof e.keys)throw new TypeError}e.union=function(e){t(e);const r=new this.constructor(this);for(const t of e.keys())r.add(t);return r},e.intersection=function(e){let r,n;t(e),this.size<=e.size?(r=this,n=e):(r=e.keys(),n=this);const s=new this.constructor;for(const e of r)n.has(e)&&s.add(e);return s},e.difference=function(e){t(e);const r=new this.constructor(this);if(this.size<=e.size)for(const t of this)e.has(t)&&r.delete(t);else for(const t of e.keys())r.has(t)&&r.delete(t);return r},e.symmetricDifference=function(e){t(e);const r=new this.constructor(this);for(const t of e.keys())this.has(t)?r.delete(t):r.add(t);return r},e.isSubsetOf=function(e){t(e);for(const t of this)if(!e.has(t))return!1;return!0},e.isSupersetOf=function(e){t(e);for(const t of e.keys())if(!this.has(t))return!1;return!0},e.isDisjointFrom=function(e){if(t(e),this.size<=e.size){for(const t of this)if(e.has(t))return!1}else for(const t of e.keys())if(this.has(t))return!1;return!0}}(SetPolyfill||(SetPolyfill={})),installPolyfill(Set,SetPolyfill),function(e){function t(e){return function(t){const r=e.bind(this)(t);return this.clear(),r.forEach((e=>this.add(e))),this}}e.takeUnion=t(SetPolyfill.union),e.takeIntersection=t(SetPolyfill.intersection),e.takeDifference=t(SetPolyfill.difference),e.takeSymmetricDifference=t(SetPolyfill.symmetricDifference)}(InPlaceSetPolyfill||(InPlaceSetPolyfill={})),installPolyfill(Set,InPlaceSetPolyfill);class BasicTextDecoder{decode(e){let t="";for(let r=0;r<e.length;r+=32768)t+=String.fromCharCode(...e.subarray(r,r+32768));return t.replace(/[\xc0-\xff][\x80-\xbf]+|[\x80-\xff]/g,(function(e){const t=e.charCodeAt(0);let r=1114112,n=0,s="";switch(t>>>4){case 12:case 13:r=(31&t)<<6|63&e.charCodeAt(1),n=r<128?0:2;break;case 14:r=(15&t)<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),n=r<2048?0:3;break;case 15:t>>>3==30&&(r=(7&t)<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|e.charCodeAt(3),n=r<65536?0:4)}for(n&&(e.length<n?n=0:r<65536?s=String.fromCharCode(r):r<1114112?(r-=65664,s=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):n=0);n<e.length;n++)s+="�";return s}))}}class Tape{constructor(e,t=0){this.iter=e,this.buffer=[],this.index=-1,this.growBuffer(t-1)}growBuffer(e){for(;this.buffer.length<e+1;)this.buffer.push(this.iter.shift())}next(){return this.growBuffer(++this.index),this.buffer[this.index]}erase(){this.buffer.splice(0,this.index+1),this.index=-1}rewind(e){if(this.index-e<-1)throw new Error("Cannot rewind past end of tape");this.index-=e}skip(e){this.index+=e}top(e=0){return this.growBuffer(this.index+e),this.buffer[this.index+e]}toString(){function e(e){return`'${JSON.stringify(e).slice(1,-1).replace(/'/g,"\\'").replace(/\\"/g,'"')}'`}return`[${[...this.buffer.slice(0,this.index+1).map(e)].join(", ")} | ${this.buffer.slice(this.index+1).map(e).join(", ")}]`}get length(){return this.index+1}}class Token{constructor(e,t,r){this.name=e,this.value=t,this.pos=r}get[Symbol.toStringTag](){return this.constructor.name}}class CFG{constructor(e,t,r){this.startingSymbol=e,this.rules=t,this.terminals=r}getTerminals(){return[...this.terminals]}getTerminalsAndEOF(){return[...this.terminals,CFG.EOF]}getNonTerminals(){return[...new Set(this.rules.keys())]}getGrammarSymbols(){return[CFG.EOF,...this.getTerminals(),...this.getNonTerminals()]}isStartingRule(e){return"string"!=typeof e?this.isStartingRule(e[0]):e===this.startingSymbol}static isTerminal(e){return!this.isEOF(e)&&!this.isLambda(e)&&e.toLowerCase()===e&&e.length>=1}static isTerminalOrEOF(e){return CFG.isEOF(e)||CFG.isTerminal(e)}static isEOF(e){return e===CFG.EOF}static isLambda(e){return e===CFG.LAMBDA_CHARACTER}static isNonTerminal(e){return"string"==typeof e&&!this.isEOF(e)&&!this.isLambda(e)&&e.toLowerCase()!==e&&e.length>=1}derivesToLambda(e,t=[]){var r;const n=this.rules;for(const s of null!==(r=n.get(e))&&void 0!==r?r:[]){if([...t].includes(s))continue;if(!s.length)return!0;if(s.some((e=>CFG.isTerminal(e))))continue;let e=!0;for(const r of s.filter((e=>CFG.isNonTerminal(e))))if(t.push(s),e=this.derivesToLambda(r,t),t.pop(),!e)break;if(e)return!0}return!1}firstSet([e,...t],r=new Set){var n;const s=this.rules;if(void 0===e)return[new Set,r];if(CFG.isTerminalOrEOF(e))return[new Set([e]),r];const i=new Set;if(!r.has(e)){r.add(e);for(const t of(null!==(n=s.get(e))&&void 0!==n?n:[]).map((t=>[e,t]))){const[n,s]=t,[o,a]=this.firstSet(this.startingSymbol===e?[...s,CFG.EOF]:s,r);i.takeUnion(o)}}if(this.derivesToLambda(e)&&t.length){const[e,n]=this.firstSet(t,r);i.takeUnion(e)}return[i,r]}followSet(e,t=new Set){const r=function(e,t=new Set){const n=this.rules;if(t.has(e))return[new Set,t];t.add(e);const s=new Set;for(const i of[...n.entries()].flatMap((([t,r])=>r.flatMap((r=>r.includes(e)?[[t,r]]:[]))))){const[n,o]=i;for(const[i,a]of[...o.entries()].filter((([t,r])=>r===e))){const e=o.slice(i+1);if(e.length){const[t,r]=this.firstSet(e,new Set);s.takeUnion(t)}if(!e.length||e.every((e=>CFG.isNonTerminal(e)&&this.derivesToLambda(e)))){this.isStartingRule(n)&&s.add(CFG.EOF);const[e,i]=r(n,t);s.takeUnion(e)}}}return[s,t]}.bind(this);return r(e,t)[0]}predictSet([e,t]){const r=this.firstSet(t)[0];return t.every((e=>this.derivesToLambda(e)))&&[...this.followSet(e).values()].forEach((e=>r.add(e))),r}getRuleList(){return this.rules.entries().flatMap((([e,t])=>t.flatMap((t=>[[e,t]])))).toArray()}getRuleListFor(e){return this.rules.get(e).map((t=>[e,t]))}static makeUniqueNonTerminal(e,t,r="'"){for(;e.getNonTerminals().includes(t);)t+=r;return t}stringifyRule(e,t=!0){return t?`${e[0]} -> ${this.stringifyRule(e,!1)}`:(e[1].length?e[1].join(" "):CFG.LAMBDA_CHARACTER)+(this.isStartingRule(e)?" "+CFG.EOF_CHARACTER:"")}stringifySet(e){return`{${e.values().map((e=>e===CFG.EOF?CFG.EOF_CHARACTER:`'${JSON.stringify(e).slice(1,-1).replace(/'/g,"\\'").replace(/\\"/g,'"')}'`)).toArray().join(", ")}}`}getRuleNumber(e){return this.isStartingRule(e[0])&&(e=[e[0],e[1].filter((e=>e!==CFG.EOF))]),this.getRuleList().findIndex((([t,r])=>e[0]===t&&e[1].length===r.length&&e[1].every(((e,t)=>e===r[t]))))}static fromString(e,t=!0){var r;const n=Object.assign(Object.create(null),{ARROW:"->",UC_LAMBDA:CFG.LAMBDA_CHARACTER,LAMBDA:"lambda",OR:"|",EOF:CFG.EOF_CHARACTER}),s=[];for(const r of e.split("\n").map((e=>e.trim())))r.startsWith("#")&&t||s.push(...r.split(" ").filter((e=>e)));const i=new Map;let o=null;const a=new Set;for(;s.length;){const e=s.shift();if(s.shift()!==n.ARROW)throw new Error(`Expected '${n.ARROW}' after '${e}'!`);i.set(e,null!==(r=i.get(e))&&void 0!==r?r:[]);const t=i.get(e);let l;for(t.push(l=[]);s[1]!==n.ARROW&&s.length;){const r=s.shift();switch(r){case n.LAMBDA:case n.UC_LAMBDA:break;case n.EOF:if(null===o)o=e;else if(o!==e)throw new Error(`Multiple starting rules containing '${n.EOF}' found!`);break;case n.OR:t.push(l=[]);break;default:CFG.isTerminal(r)&&a.add(r),l.push(r)}}}if(null===o)throw new Error(`No starting rule containing '${n.EOF}' found!`);return new CFG(o,i,a)}cfsm(){return new SLR1.CFSM(this)}}CFG.EOF=void 0,CFG.EOF_CHARACTER="$",CFG.LAMBDA_CHARACTER="λ",function(e){const t=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function i(e,t){if(!s[e]){s[e]={};for(let t=0;t<e.length;t++)s[e][e.charAt(t)]=t}return s[e][t]}function o(e){return a(e,16,(function(e){return t(e)}))}function a(e,t,r){if(null==e)return"";let n,s,i={},o={},a="",l="",c="",u=2,h=3,f=2,d=[],p=0,g=0;for(let m=0;m<e.length;m+=1)if(a=e.charAt(m),Object.prototype.hasOwnProperty.call(i,a)||(i[a]=h++,o[a]=!0),l=c+a,Object.prototype.hasOwnProperty.call(i,l))c=l;else{if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(n=0;n<f;n++)p<<=1,g==t-1?(g=0,d.push(r(p)),p=0):g++;for(s=c.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s>>=1}else{for(s=1,n=0;n<f;n++)p=p<<1|s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s=0;for(s=c.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s>>=1}u--,0==u&&(u=Math.pow(2,f),f++),delete o[c]}else for(s=i[c],n=0;n<f;n++)p=p<<1|1&s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s>>=1;u--,0==u&&(u=Math.pow(2,f),f++),i[l]=h++,c=String(a)}if(""!==c){if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(n=0;n<f;n++)p<<=1,g==t-1?(g=0,d.push(r(p)),p=0):g++;for(s=c.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s>>=1}else{for(s=1,n=0;n<f;n++)p=p<<1|s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s=0;for(s=c.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s>>=1}u--,0==u&&(u=Math.pow(2,f),f++),delete o[c]}else for(s=i[c],n=0;n<f;n++)p=p<<1|1&s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s>>=1;u--,0==u&&(u=Math.pow(2,f),f++)}for(s=2,n=0;n<f;n++)p=p<<1|1&s,g==t-1?(g=0,d.push(r(p)),p=0):g++,s>>=1;for(;;){if(p<<=1,g==t-1){d.push(r(p));break}g++}return d.join("")}function l(e){return null==e?"":""==e?null:c(e.length,32768,(function(t){return e.charCodeAt(t)}))}function c(e,r,n){let s,i,o,a,l,c,u,h,f=[],d=4,p=4,g=3,m="",y=[],S={val:n(0),position:r,index:1};for(i=0;i<3;i+=1)f[i]=i;for(a=0,c=Math.pow(2,2),u=1;u!=c;)l=S.val&S.position,S.position>>=1,0==S.position&&(S.position=r,S.val=n(S.index++)),a|=(l>0?1:0)*u,u<<=1;switch(s=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)l=S.val&S.position,S.position>>=1,0==S.position&&(S.position=r,S.val=n(S.index++)),a|=(l>0?1:0)*u,u<<=1;h=t(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)l=S.val&S.position,S.position>>=1,0==S.position&&(S.position=r,S.val=n(S.index++)),a|=(l>0?1:0)*u,u<<=1;h=t(a);break;case 2:return""}for(f[3]=h,o=h,y.push(h);;){if(S.index>e)return"";for(a=0,c=Math.pow(2,g),u=1;u!=c;)l=S.val&S.position,S.position>>=1,0==S.position&&(S.position=r,S.val=n(S.index++)),a|=(l>0?1:0)*u,u<<=1;switch(h=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)l=S.val&S.position,S.position>>=1,0==S.position&&(S.position=r,S.val=n(S.index++)),a|=(l>0?1:0)*u,u<<=1;f[p++]=t(a),h=p-1,d--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)l=S.val&S.position,S.position>>=1,0==S.position&&(S.position=r,S.val=n(S.index++)),a|=(l>0?1:0)*u,u<<=1;f[p++]=t(a),h=p-1,d--;break;case 2:return y.join("")}if(0==d&&(d=Math.pow(2,g),g++),f[h])m=f[h];else{if(h!==p)return null;m=o+o.charAt(0)}y.push(m),f[p++]=o+m.charAt(0),d--,o=m,0==d&&(d=Math.pow(2,g),g++)}}e.compressToBase64=function(e){if(null==e)return"";const t=a(e,6,(function(e){return r.charAt(e)}));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},e.decompressFromBase64=function(e){return null==e?"":""==e?null:c(e.length,32,(function(t){return i(r,e.charAt(t))}))},e.compressToUTF16=function(e){return null==e?"":a(e,15,(function(e){return t(e+32)}))+" "},e.decompressFromUTF16=function(e){return null==e?"":""==e?null:c(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},e.compressToUint8Array=function(e){const t=o(e),r=new Uint8Array(2*t.length);for(let e=0,n=t.length;e<n;e++){const n=t.charCodeAt(e);r[2*e]=n>>>8,r[2*e+1]=n%256}return r},e.decompressFromUint8Array=function(e){if(null==e)return l(e);{const r=new Array(e.length/2);for(let t=0,n=r.length;t<n;t++)r[t]=256*e[2*t]+e[2*t+1];const n=[];return r.forEach((function(e){n.push(t(e))})),l(n.join(""))}},e.compressToEncodedURIComponent=function(e){return null==e?"":a(e,6,(function(e){return n.charAt(e)}))},e.decompressFromEncodedURIComponent=function(e){return null==e?"":""==e?null:c((e=e.replace(/ /g,"+")).length,32,(function(t){return i(n,e.charAt(t))}))},e.compress=o,e.decompress=l,e.zip=o,e.unzip=l}(LZCompression||(LZCompression={})),function(e){const t=new Set(Object.keys(Object.getOwnPropertyDescriptors(Symbol)).flatMap((function(e){const t=Symbol[e];return"symbol"==typeof t&&t!==Symbol.for(t.toString().slice(7,-1))?[t]:[]})));e.toSignable=Symbol("Signature.toSignable"),e.create=function(r,n={}){const s=function r(n,s={}){var i;const o=new Map;return JSON.stringify(function n(s,i,a){try{if("object"==typeof s&&null!==s||"function"==typeof s&&a.includeFunctions&&a.preserveReferences){if(o.has(s))return`@&:${r(o.get(s),{...a,space:0})}`;o.set(s,i)}if(Array.isArray(s))return s.filter((e=>"function"!=typeof e||a.includeFunctions)).map(((e,t)=>n(e,[...i,`${t}`],a)));if("object"==typeof s&&null!==s){if(e.toSignable in s)return`@${Object.getPrototypeOf(s).constructor.name}:${r(s[e.toSignable](a,(e=>n(e,[...i],{...a,space:0}))),{...a,space:0})}`;const t=[...(l=s,Object.getOwnPropertySymbols(l).map((e=>[e,l[e]]))),...Object.entries(s)].map((([e,t])=>[n(e,[...i,e],a),n(t,[...i,e],a)]));return Object.fromEntries((null==a?void 0:a.sortKeys)?t.sort():t)}if("bigint"==typeof s)return`@bigint:${r(s.toString())}`;if("symbol"==typeof s){const e=s.toString().slice(7,-1);return t.add(s),`@symbol:${r([e,Symbol.for(e)===s?-1:[...t.values()].indexOf(s)])}`}return"string"==typeof s?s.replace(/@/g,"@@"):Number.isNaN(s)?"@number:NaN":s===1/0?"@number:+Infinity":s===-1/0?"@number:-Infinity":void 0===s?"@undefined":"function"==typeof s?a.includeFunctions?`@function:${s}`:void 0:s}finally{"object"!=typeof s||null===s||a.preserveReferences||o.delete(s)}var l}(n,[],s),void 0,Math.max(null!==(i=null==s?void 0:s.space)&&void 0!==i?i:0,0))}(r,{sortKeys:!0,includeFunctions:!0,preserveReferences:!1,...n});return-1===n.space||void 0===n.space?LZCompression.zip(s):s};class SignatureMap{constructor(e){this.base=new Map;for(const[t,r]of null!=e?e:[])this.set(t,r)}clear(){return this.base.clear()}delete(t){return this.base.delete(e.create(t))}forEach(e,t){return void 0!==t&&(e=e.bind(t)),[...this.base.values()].forEach((([t,r])=>e(r,t,this)))}get(t){var r;return null===(r=this.base.get(e.create(t)))||void 0===r?void 0:r[1]}has(t){return this.base.has(e.create(t))}set(t,r){return this.base.set(e.create(t),[t,r]),this}get size(){return this.base.size}entries(){return this.base.values()}keys(){return[...this.base.values()].map((([e,t])=>e))[Symbol.iterator]()}values(){return[...this.base.values()].map((([e,t])=>t))[Symbol.iterator]()}[Symbol.iterator](){return this.base.values()}get[Symbol.toStringTag](){return"SignatureMap"}[e.toSignable](e,t){return e.sortKeys?[...this.entries()].map(t).sort():[...this.entries()]}}e.SignatureMap=SignatureMap;class SignatureSet{constructor(e){this.base=new Map;for(const t of null!=e?e:[])this.add(t)}add(t){return this.base.set(e.create(t),t),this}clear(){return this.base.clear()}delete(t){return this.base.delete(e.create(t))}forEach(e,t){return void 0!==t&&(e=e.bind(t)),[...this.base.values()].forEach((t=>e(t,t,this)))}has(t){return this.base.has(e.create(t))}get size(){return this.base.size}entries(){return[...this.base.values()].map((e=>[e,e]))[Symbol.iterator]()}keys(){return this.base.values()}values(){return this.base.values()}[Symbol.iterator](){return this.base.values()}get[Symbol.toStringTag](){return"SignatureSet"}[e.toSignable](e,t){return e.sortKeys?[...this.values()].map(t).sort():[...this.values()]}}e.SignatureSet=SignatureSet}(Signature||(Signature={}));var AlphabetEncoding,SignatureSet=Signature.SignatureSet,SignatureMap=Signature.SignatureMap;Set.prototype[Signature.toSignable]=function(e,t){return e.sortKeys?[...this.values()].map(t).sort():[...this.values()]},Map.prototype[Signature.toSignable]=function(e,t){return e.sortKeys?[...this.entries()].map(t).sort():[...this.entries()]},Date.prototype[Signature.toSignable]=function(){return this.toJSON()},Number.prototype[Signature.toSignable]=function(){return this.valueOf()},Boolean.prototype[Signature.toSignable]=function(){return this.valueOf()},String.prototype[Signature.toSignable]=function(){return this.toString()},RegExp.prototype[Signature.toSignable]=function(){return this.toString()},installPolyfill(SignatureSet,SetPolyfill),installPolyfill(SignatureSet,InPlaceSetPolyfill),function(e){e.decode=function(e){return null==e?void 0:e.replace(/x.{0,2}/g,(function(e){const t=+`0${e}`;if(Number.isNaN(t))throw new Error(`'${e}' is not a valid escape sequence!`);return String.fromCharCode(t)}))},e.encode=function(e,t=!1){function r(e){return`x${e.charCodeAt(0).toString(16).padStart(2,"0")}`}return t?e[Symbol.iterator]().map(r).toArray().join(""):null==e?void 0:e.replace(/[^0-9A-Za-wy-z]/g,r)}}(AlphabetEncoding||(AlphabetEncoding={}));const{decode:alphaDecode,encode:alphaEncode}=AlphabetEncoding;var DecoratorFactory;!function(e){function t(...e){return!(("function"==typeof e[0]||void 0===e[0])&&(t=e[1],"object"==typeof t&&null!==t&&["kind","name"].every((e=>Object.hasOwn(t,e)))));var t}e.addLazyDecoratorSymbol=Symbol("addLazyDecorator"),e.invokeDefault=function(e,t,...r){return"class"===t.kind?new e(...r):e(...r)},e.decorator=function(r){return function(...n){if(t(...n))return(t,s)=>(null==t?void 0:t[e.addLazyDecoratorSymbol])?void t[e.addLazyDecoratorSymbol](r,n):r(t,s,...n);{const[t,s]=n;return(null==t?void 0:t[e.addLazyDecoratorSymbol])?void t[e.addLazyDecoratorSymbol](r,[]):r(t,s)}}},e.getPropertyDescriptor=function e(t,r){var n;if(null!=t)return null!==(n=Object.getOwnPropertyDescriptor(t,r))&&void 0!==n?n:e(Object.getPrototypeOf(t),r)}}(DecoratorFactory||(DecoratorFactory={}));const enumerable=DecoratorFactory.decorator(((e,t,r=!0)=>t.addInitializer((function(){Object.defineProperty(this,t.name,{...DecoratorFactory.getPropertyDescriptor(this,t.name),enumerable:r})}))));var Trees;!function(e){var t,r,n,s,i;class TreeInternals{}TreeInternals.treeLength=Symbol("Tree.treeLength"),TreeInternals.values=Symbol("Tree.values"),TreeInternals.at=Symbol("Tree.at"),TreeInternals.push=Symbol("Tree.push"),TreeInternals.unshift=Symbol("Tree.unshift"),TreeInternals.pop=Symbol("Tree.pop"),TreeInternals.shift=Symbol("Tree.shift"),TreeInternals.splice=Symbol("Tree.splice"),TreeInternals.iterator=Symbol("Tree.iterator"),TreeInternals.forEach=Symbol("Tree.forEach");class Tree extends TreeInternals{constructor(){super(...arguments),t.add(this),r.set(this,[]),n.set(this,void 0)}get parent(){return __classPrivateFieldGet(this,n,"f")}[(r=new WeakMap,n=new WeakMap,t=new WeakSet,s=function(e){return void 0!==e&&__classPrivateFieldSet(e,n,void 0,"f"),e},i=function(e){if(void 0===e)throw new Error("Cannot take ownership of undefined");if(e===this)throw new Error("Cannot take ownership of self");if(void 0!==e.parent)throw new Error("Cannot take ownership of a subtree");let t=this;do{if(t===e)throw new Error("Cannot take ownership of ancestor")}while(t=t.parent);return __classPrivateFieldSet(e,n,this,"f"),e},TreeInternals.push)](...e){return __classPrivateFieldGet(this,r,"f").push(...e.map((e=>__classPrivateFieldGet(this,t,"m",i).call(this,e))))}[TreeInternals.pop](){return __classPrivateFieldGet(this,t,"m",s).call(this,__classPrivateFieldGet(this,r,"f").pop())}[TreeInternals.unshift](...e){return __classPrivateFieldGet(this,r,"f").unshift(...e.map((e=>__classPrivateFieldGet(this,t,"m",i).call(this,e))))}[TreeInternals.shift](){return __classPrivateFieldGet(this,t,"m",s).call(this,__classPrivateFieldGet(this,r,"f").shift())}[TreeInternals.splice](e,n,...o){return __classPrivateFieldGet(this,r,"f").splice(e,n,...o.map((e=>__classPrivateFieldGet(this,t,"m",i).call(this,e)))).map((e=>__classPrivateFieldGet(this,t,"m",s).call(this,e)))}[TreeInternals.at](e){return __classPrivateFieldGet(this,r,"f").at(e)}get[TreeInternals.treeLength](){return __classPrivateFieldGet(this,r,"f").length}[TreeInternals.forEach](e,t){return void 0!==t&&(e=e.bind(t)),__classPrivateFieldGet(this,r,"f").forEach(((t,r)=>e(t,r,this)))}[TreeInternals.values](){return __classPrivateFieldGet(this,r,"f").values()}get[Symbol.toStringTag](){return this.constructor.name}[TreeInternals.iterator](){return __classPrivateFieldGet(this,r,"f")[Symbol.iterator]()}}e.Tree=Tree}(Trees||(Trees={}));var Tree=Trees.Tree;let ArrayTree=(()=>{var e,t;let r,n=Tree,s=[];return e=class ArrayTree extends n{constructor(){super(...arguments),this.at=(__runInitializers(this,s),super[Tree.at]),this.values=super[Tree.values],this.push=super[Tree.push],this.unshift=super[Tree.unshift],this.pop=super[Tree.pop],this.shift=super[Tree.shift],this.splice=super[Tree.splice],this[t]=super[Tree.iterator]}get length(){return super[Tree.treeLength]}get children(){return[...this]}},t=Symbol.iterator,(()=>{var t;const i="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=n[Symbol.metadata])&&void 0!==t?t:null):void 0;r=[enumerable],__esDecorate(e,null,r,{kind:"getter",name:"children",static:!1,private:!1,access:{has:e=>"children"in e,get:e=>e.children},metadata:i},null,s),i&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})})(),e})(),BinaryTree=(()=>{var e;let t,r,n=Tree,s=[];return e=class BinaryTree extends n{set left(e){this[Tree.splice](0,1,e)}get left(){return this[Tree.at](0)}set right(e){this[Tree.splice](1,1,e)}get right(){return this[Tree.at](1)}constructor(){super(...arguments),__runInitializers(this,s)}},(()=>{var i;const o="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(i=n[Symbol.metadata])&&void 0!==i?i:null):void 0;t=[enumerable],r=[enumerable],__esDecorate(e,null,t,{kind:"getter",name:"left",static:!1,private:!1,access:{has:e=>"left"in e,get:e=>e.left},metadata:o},null,s),__esDecorate(e,null,r,{kind:"getter",name:"right",static:!1,private:!1,access:{has:e=>"right"in e,get:e=>e.right},metadata:o},null,s),o&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})})(),e})();function createAsyncPeekableIterator(e){let t=e[Symbol.asyncIterator](),r=t.next();const n=async function*(){let e,n=!1;for(;!n;)({done:n,value:e}=await r),n||(r=t.next(),yield e)}();return n.peek=async function(){return(await r).value},n}function createPeekableIterator(e){let t=e[Symbol.iterator](),r=t.next();const n=function*(){let e,n=!1;for(;!n;)({done:n,value:e}=r),n||(r=t.next(),yield e)}();return n.peek=function(){return r.value},n}var CSV,Graphviz,Parsing,SLR1,ZLang,LL1;function*range(e,t,r){var n;function s(t){return"bigint"==typeof e?BigInt(t):t}function i(e){return"string"==typeof e?e.charCodeAt(0):e}const[o,a]=void 0===t?[s(0),i(e)]:[i(e),i(t)],l=null!==(n=i(r))&&void 0!==n?n:s(1);let c=o;if(a<o)throw new RangeError("Range min cannot be greater than max");if("string"==typeof e)for(;c<=a;)yield String.fromCharCode(c),c+=l;else for(;c<a;)yield c,c+=l}!function(e){function t(e){if(1!==e.length)throw new Error("CSV delimiter must be exactly one character (code unit) long")}function r(e){return e.replace(/[.*+?^${}()|[\]\\\-]/g,String.raw`\$&`)}e.stringify=function(e,n,{header:s=!0,delimiter:i=","}={}){t(i);const o=new RegExp(String.raw`[\n${r(i)}"]`);function a([e,t]){const r=`${n?n(e,t):t}`;return o.test(r)?`"${r.replaceAll('"','""')}"`:r}function l(e){return e.map(a).join(i)}return(s?`${l(Object.keys(e[0]).map((e=>[null,e])))}\n`:"")+e.map((e=>l(Object.entries(e)))).join("\n")},e.parse=function(e,n,{header:s=!0,delimiter:i=","}={}){var o;t(i);const a=r(i),l=new RegExp(String.raw`(${a}|\r?\n|\r|^)(?:"((?:\\.|""|[^\\"])*)"|([^${a}"\r\n]*))`,"gi"),c=[[]];let u=null;for(;u=l.exec(e);)u[1].length&&u[1]!==i&&c.push([]),c.at(-1).push(u[2]?u[2].replace(/[\\"](.)/g,"$1"):null!==(o=u[3])&&void 0!==o?o:"");if(!s||!c.length)return c.map(((e,t)=>n?n(t.toString(),e):e));const h=c.shift().map((e=>n?n(null,e):e));return c.map((e=>Object.fromEntries(e.map(((e,t)=>[h[t],n?n(h[t],e):e])))))},e.fromCammelCase=function(e){return e[0].toUpperCase()+e.slice(1).replace(/[A-Z]/," $&")},e.toCammelCase=function(e){return e[0].toLowerCase()+e.slice(1).replaceAll(" ","")}}(CSV||(CSV={})),function(e){function t(e){return e?`[${Object.entries(e).map((([e,t])=>`${e}=${JSON.stringify(t)}`)).join(", ")}]`:""}e.label=Symbol("Graphviz.label"),e.children=Symbol("Graphviz.children"),e.attributes=Symbol("Graphviz.attributes"),e.text=function(t,r={}){return{...r,[e.label]:t}},e.serialize=function(r,{output:n}={}){const s=function*(){let e=0;for(;;)yield e++}(),i=new Map,o=[];o.push("digraph {"),function r(n,a,l){var c,u,h;if("object"!=typeof l||null===l)return;i.has(l)||i.set(l,`Node${s.shift()}`);const f=i.get(l),d=null!==(c=l[e.attributes])&&void 0!==c?c:{};e.label in l&&(d.label=l[e.label]),null!==(u=d.label)&&void 0!==u||(d.label=Symbol.toStringTag in l?l[Symbol.toStringTag]:Object.prototype.toString.apply(l)),o.push(`\t${f}${t(d)}`),null!=n&&o.push(`${n}->${f}${t({label:a})}`);const p=null!==(h=l[e.children])&&void 0!==h?h:Object.keys(l);for(const[e,t]of Array.isArray(p)&&Array.isArray(p[0])?p:Object.entries(Array.isArray(p)?l:p))if(!Array.isArray(p)||p.includes(e)||Array.isArray(p[0]))if(Array.isArray(t))for(const[n,s]of Array.entries(t))r(f,`${e}[${n}]`,s);else r(f,e,t)}(null,null,r),o.push("}");const a=o.join("\n");return"string"==typeof n&&system.writeTextFileSync(n,a),a}}(Graphviz||(Graphviz={})),function(e){var t,r;class AbstractParseTree extends Tree{constructor(e){super(),this.name=e}}let n=(()=>{var e,t;let r,n=AbstractParseTree,s=[];return e=class ParseTreeNode extends n{constructor(e){super(e),this.at=(__runInitializers(this,s),super[Tree.at]),this.values=super[Tree.values],this.push=super[Tree.push],this.unshift=super[Tree.unshift],this.pop=super[Tree.pop],this.shift=super[Tree.shift],this.splice=super[Tree.splice],this[t]=super[Tree.iterator]}get parent(){return super.parent}get length(){return super[Tree.treeLength]}get children(){return[...this]}get[(t=Symbol.iterator,r=[enumerable],Graphviz.label)](){return this.name}get[Graphviz.children](){return this.children.map((e=>["",e]))}},(()=>{var t;const i="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=n[Symbol.metadata])&&void 0!==t?t:null):void 0;__esDecorate(e,null,r,{kind:"getter",name:"children",static:!1,private:!1,access:{has:e=>"children"in e,get:e=>e.children},metadata:i},null,s),i&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})})(),e})();e.ParseTreeNode=n;t=Graphviz.label,e.ParseTreeLambdaNode=class ParseTreeLambdaNode extends AbstractParseTree{constructor(){super(CFG.LAMBDA_CHARACTER),this[t]=CFG.LAMBDA_CHARACTER}};r=Graphviz.label,e.ParseTreeEOFNode=class ParseTreeEOFNode extends AbstractParseTree{constructor(){super(CFG.EOF_CHARACTER),this[r]=CFG.EOF_CHARACTER}};class ParseTreeTokenNode extends AbstractParseTree{constructor(e,t){super(e),this.value=t}get[Graphviz.label](){return this.name===this.value?this.name:`${this.name}:${this.value}`}}e.ParseTreeTokenNode=ParseTreeTokenNode;class SyntaxError extends Error{constructor(e,t){super(e),this.pos=t}}e.SyntaxError=SyntaxError;e.SyntaxTransformer=class SyntaxTransformer{constructor(e){this.rules=e instanceof Map?e:new Map(Object.entries(e));for(const[e,t]of this.rules.entries())if(e.includes("|")){for(const r of e.split("|").map((e=>e.trim())))this.rules.set(r,t);this.rules.delete(e)}}transform(e){for(const t of[e.name,"*"])if(this.rules.has(t)){const r=this.rules.get(t).bind(e)(e);if(void 0!==r)return r}return e}}}(Parsing||(Parsing={})),function(e){const t=Symbol("SLR1.marker");class CFSM{constructor(e){this.G=e,this.itemSets=new SignatureSet([this.closure(this.freshStarts(this.G.startingSymbol))]),this.edges=new SignatureSet,this.numbers=new SignatureMap;for(const e of this.itemSets){let t=-1;for(;t!=this.itemSets.size;){t=this.itemSets.size;for(const t of this.G.getGrammarSymbols()){const r=this.goto(e,t);0!==r.size&&(this.itemSets.add(r),this.edges.add([e,t,r]))}}}const t=function*(){let e=0;for(;;)yield e++}();for(const e of this.itemSets)this.numbers.set(e,t.shift())}getSetNumber(e){var t;return null!==(t=this.numbers.get(e))&&void 0!==t?t:-1}freshStarts(e){return new SignatureSet(this.G.getRuleListFor(e).map((([r,n])=>[r,t,...n,...e===this.G.startingSymbol?[CFG.EOF]:[]])))}closure(e){const r=new SignatureSet(e);let n=-1;for(;r.size!=n;){n=r.size;for(const[e,...n]of[...r]){const e=n[n.indexOf(t)+1];CFG.isNonTerminal(e)&&r.takeUnion(this.freshStarts(e))}}return r}goto(e,r){const n=new SignatureSet(e[Symbol.iterator]().filter((([e,...n])=>n[n.indexOf(t)+1]===r)).map((function(e){const r=e.indexOf(t);return r>0&&r<e.length-1?[e[0],...e.slice(1,r),e[r+1],e[r],...e.slice(r+2)]:[...e]})));return this.closure(n)}getItemSets(){return this.itemSets}getEdges(){return this.edges}[Symbol.iterator](){return this.itemSets[Symbol.iterator]()}}function r(e){const r=new CFSM(e),n=new Map;for(const s of r){const i=r.getSetNumber(s);n.set(i,new Map);for(const o of e.getGrammarSymbols())s[Symbol.iterator]().some((([e,...r])=>[...r,!1][r.indexOf(t)+1]===o))&&n.get(i).set(o,`sh-${r.getSetNumber(r.goto(s,o))}`);for(const r of s[Symbol.iterator]().filter((([e,...r])=>r.at(-1)===t))){const[s]=r;for(const o of e.followSet(s)){if(void 0!==n.get(i).get(o))throw new Error(`Grammar is not SLR(1) (Caused by item set ${i})`);n.get(i).set(o,`r-${e.getRuleNumber([r[0],r.slice(1).filter((e=>e!==t))])}`)}}let o;(o=s[Symbol.iterator]().find((([r,...n])=>n.at(-1)===t&&n.at(-2)===CFG.EOF&&e.isStartingRule(r))))&&n.set(i,new Map(e.getGrammarSymbols().map((r=>[r,`R-${e.getRuleNumber([o[0],o.slice(1).filter((e=>e!==t))])}`]))))}return n}e.CFSM=CFSM,e.createParseTable=r;e.SLR1Parser=class SLR1Parser{constructor(e,t=new Parsing.SyntaxTransformer({}),n){this.cfg=e,this.sdt=t;try{if(void 0!==n){const{signature:t,table:r}=JSON.parse(LZCompression.decompressFromUint8Array(system.readFileSync(n)));Signature.create(e)===t&&(this.parseTable=this.deserializeTableFromCSV(r))}}catch(e){}if(void 0===this.parseTable){this.parseTable=r(e);try{void 0!==n&&system.writeFileSync(n,LZCompression.compressToUint8Array(JSON.stringify({signature:Signature.create(e),table:this.serializeTableToCSV()})))}catch(e){}}}deserializeTableFromCSV(e){const t=new Map,[[r,...n],...s]=e.trim().split("\n").map((e=>e.split(",")));for(const e of s){const r=new Map;t.set(+e.shift(),r);for(const t of range(e.length))r.set(n[t]===CFG.EOF_CHARACTER?CFG.EOF:n[t],e[t])}return t}serializeTableToCSV(){const e=this.getParseTable(),t=[[".",...this.cfg.getGrammarSymbols().map((e=>null!=e?e:CFG.EOF_CHARACTER))].join(",")];for(const[r,n]of e.entries()){const e=new Map(this.cfg.getGrammarSymbols().map((e=>[e,void 0])));for(const[t,r]of n.entries())e.set(t,r);t.push([r,...e.values().map((e=>null!=e?e:""))].join(","))}return t.join("\n")}getCFG(){return this.cfg}getParseTable(){return this.parseTable}parse(e){var t,r,a,l,c,u;const h=this.parseTable,f=this.cfg,d=this.sdt,p=createPeekableIterator(e),g=[],m=[];m.push({state:0});const y=f.getRuleList();function S(e){var t,r;const[a,l]=y[e],c=new n(a);if(0===l.length)c.push(new s);else for(const e of[...l,...f.isStartingRule(a)?[void 0]:[]].reverse()){const{state:n,tree:s}=m.pop();if(CFG.isEOF(e)&&void 0===s)c.unshift(new i);else if(CFG.isTerminal(e)&&s instanceof Token)c.unshift(new o(s.name,s.value));else{if(!(CFG.isNonTerminal(e)&&s instanceof Tree))throw new Parsing.SyntaxError(`Expected '${null!=e?e:"EOF"}' got '${null!==(r=null!==(t=null==s?void 0:s.name)&&void 0!==t?t:s)&&void 0!==r?r:"EOF"}'`);{const e=d.transform(s);Array.isArray(e)?c.unshift(...e):null!=e&&c.unshift(e)}}}return c}for(;;){let e=null!==(t=g.at(0))&&void 0!==t?t:p.peek();const[n,s]=null!==(a=null===(r=h.get(m.at(-1).state).get(null==e?void 0:e.name))||void 0===r?void 0:r.split("-"))&&void 0!==a?a:[];if(void 0===n)throw new Parsing.SyntaxError(`Expected one of ${h.get(m.at(-1).state).keys().map((e=>`'${null!=e?e:"EOF"}'`)).toArray().join(", ")} got '${null!==(c=null!==(l=null==e?void 0:e.name)&&void 0!==l?l:e)&&void 0!==c?c:"EOF"}'`);const i=+s;if("sh"===n){const e=null!==(u=g.shift())&&void 0!==u?u:p.shift();m.push({state:i,tree:e})}else if("r"===n)g.unshift(S(i));else if("R"===n)return this.sdt.transform(S(i))}}};var n=Parsing.ParseTreeNode,s=Parsing.ParseTreeLambdaNode,i=Parsing.ParseTreeEOFNode,o=Parsing.ParseTreeTokenNode}(SLR1||(SLR1={})),function(e){const t=CFG.fromString((new BasicTextDecoder).decode(new Uint8Array([35,35,35,10,35,32,90,79,66,79,83,46,67,70,71,32,45,45,45,32,90,79,66,79,83,32,97,110,100,32,67,90,65,82,32,99,111,109,112,105,108,101,114,32,112,114,111,106,101,99,116,115,10,35,32,84,104,105,115,32,105,115,32,97,110,32,83,76,82,40,49,41,32,103,114,97,109,109,97,114,10,35,35,35,10,77,79,68,85,76,69,32,32,32,32,45,62,32,77,79,68,80,65,82,84,83,32,36,10,10,35,32,97,32,77,79,68,85,76,69,32,105,115,32,97,32,42,110,111,110,45,101,109,112,116,121,42,32,99,111,108,108,101,99,116,105,111,110,32,111,102,32,103,108,111,98,97,108,32,68,69,67,76,73,68,115,44,32,70,85,78,83,73,71,115,44,10,35,32,111,114,32,70,85,78,67,84,73,79,78,32,100,101,102,105,110,105,116,105,111,110,115,10,77,79,68,80,65,82,84,83,32,32,45,62,32,71,79,84,68,69,67,76,76,73,83,84,32,115,99,32,124,32,71,79,84,68,69,67,76,76,73,83,84,32,115,99,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,71,70,84,68,69,67,76,76,73,83,84,32,115,99,32,124,32,71,70,84,68,69,67,76,76,73,83,84,32,115,99,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,70,85,78,83,73,71,32,115,99,32,124,32,70,85,78,83,73,71,32,115,99,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,70,85,78,67,84,73,79,78,32,32,124,32,70,85,78,67,84,73,79,78,32,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,69,77,73,84,32,32,32,115,99,32,124,32,69,77,73,84,32,32,32,115,99,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,82,65,78,68,32,32,32,115,99,32,124,32,82,65,78,68,32,32,32,115,99,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,73,70,32,32,32,32,32,32,32,32,124,32,73,70,32,32,32,32,32,32,32,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,73,70,69,76,83,69,32,32,32,32,124,32,73,70,69,76,83,69,32,32,32,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,87,72,73,76,69,32,32,32,32,32,124,32,87,72,73,76,69,32,32,32,32,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,68,79,87,72,73,76,69,32,32,32,124,32,68,79,87,72,73,76,69,32,32,32,77,79,68,80,65,82,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,65,83,83,73,71,78,32,115,99,32,124,32,65,83,83,73,71,78,32,115,99,32,77,79,68,80,65,82,84,83,10,10,10,71,79,84,68,69,67,76,76,73,83,84,32,45,62,32,79,84,72,69,82,84,89,80,69,32,68,69,67,76,73,68,83,10,71,70,84,68,69,67,76,76,73,83,84,32,45,62,32,70,85,78,84,89,80,69,32,68,69,67,76,73,68,83,10,10,70,85,78,84,89,80,69,32,32,32,45,62,32,98,111,111,108,32,124,32,105,110,116,32,124,32,102,108,111,97,116,32,10,79,84,72,69,82,84,89,80,69,32,45,62,32,99,111,110,115,116,32,98,111,111,108,10,32,32,32,32,32,32,32,32,32,32,32,124,32,99,111,110,115,116,32,105,110,116,10,32,32,32,32,32,32,32,32,32,32,32,124,32,99,111,110,115,116,32,102,108,111,97,116,10,32,32,32,32,32,32,32,32,32,32,32,124,32,115,116,114,105,110,103,10,10,35,32,102,117,110,99,116,105,111,110,32,115,105,103,110,97,116,117,114,101,115,32,40,97,107,97,32,34,104,101,97,100,101,114,34,32,111,114,32,112,114,111,116,111,116,121,112,101,41,32,10,70,85,78,83,73,71,32,32,32,32,45,62,32,70,85,78,84,89,80,69,32,105,100,32,108,112,97,114,101,110,32,80,65,82,65,77,76,73,83,84,32,114,112,97,114,101,110,10,80,65,82,65,77,76,73,83,84,32,45,62,32,70,85,78,84,89,80,69,32,105,100,32,99,111,109,109,97,32,80,65,82,65,77,76,73,83,84,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,70,85,78,84,89,80,69,32,105,100,10,32,32,32,32,32,32,32,32,32,32,32,124,32,108,97,109,98,100,97,10,35,75,69,72,45,50,48,50,51,10,35,78,79,80,65,82,65,77,83,32,32,45,62,32,108,97,109,98,100,97,10,10,35,32,102,117,110,99,116,105,111,110,32,100,101,102,105,110,105,116,105,111,110,115,32,105,109,112,108,105,99,105,116,108,121,32,100,101,99,108,97,114,101,32,97,32,118,97,114,105,97,98,108,101,32,104,111,108,100,105,110,103,32,116,104,101,32,10,35,32,114,101,116,117,114,110,32,118,97,108,117,101,32,40,114,101,116,117,114,110,115,32,95,105,100,95,41,32,98,101,102,111,114,101,32,97,110,121,32,102,117,110,99,116,105,111,110,32,100,101,102,105,110,105,116,105,111,110,32,115,116,97,116,101,109,101,110,116,115,10,70,85,78,67,84,73,79,78,32,32,45,62,32,70,85,78,83,73,71,32,114,101,116,117,114,110,115,32,105,100,32,97,115,115,105,103,110,32,69,88,80,82,32,83,84,69,80,83,10,10,35,32,66,82,65,67,69,83,84,77,84,83,32,97,114,101,32,119,114,97,112,112,101,100,32,119,105,116,104,32,111,112,101,110,47,99,108,111,115,101,32,115,99,111,112,101,32,116,114,105,103,103,101,114,105,110,103,32,116,101,114,109,105,110,97,108,115,10,66,82,65,67,69,83,84,77,84,83,32,45,62,32,108,98,114,97,99,101,32,66,83,84,77,84,83,32,114,98,114,97,99,101,10,66,83,84,77,84,83,32,32,32,32,45,62,32,66,83,84,77,84,83,32,66,83,84,77,84,10,32,32,32,32,32,32,32,32,32,32,32,124,32,108,97,109,98,100,97,10,66,83,84,77,84,32,32,32,32,32,45,62,32,66,82,65,67,69,83,84,77,84,83,10,32,32,32,32,32,32,32,32,32,32,32,124,32,68,69,67,76,76,73,83,84,32,115,99,10,32,32,32,32,32,32,32,32,32,32,32,124,32,65,83,83,73,71,78,32,115,99,10,32,32,32,32,32,32,32,32,32,32,32,124,32,73,70,10,32,32,32,32,32,32,32,32,32,32,32,124,32,73,70,69,76,83,69,10,32,32,32,32,32,32,32,32,32,32,32,124,32,68,79,87,72,73,76,69,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,87,72,73,76,69,10,32,32,32,32,32,32,32,32,32,32,32,124,32,69,77,73,84,32,115,99,10,32,32,32,32,32,32,32,32,32,32,32,124,32,82,65,78,68,32,115,99,10,10,35,32,83,79,76,79,83,84,77,84,32,97,114,101,32,116,104,111,115,101,32,111,110,101,45,108,105,110,101,114,115,32,119,101,32,112,101,114,109,105,116,32,97,102,116,101,114,32,105,102,40,32,41,44,32,101,108,115,101,44,32,119,104,105,108,101,40,32,41,32,10,35,32,110,111,116,101,32,116,104,101,32,97,98,115,101,110,99,101,32,111,102,32,68,69,67,76,76,73,83,84,44,32,115,111,32,119,101,32,99,97,110,39,116,32,100,111,10,35,32,32,32,105,102,40,32,120,32,60,32,121,32,41,32,105,110,116,32,120,59,10,35,32,97,110,100,32,99,111,110,100,105,116,105,111,110,97,108,108,121,32,100,101,99,108,97,114,101,32,97,32,118,97,114,105,97,98,108,101,10,83,79,76,79,83,84,77,84,32,32,45,62,32,65,83,83,73,71,78,32,115,99,10,32,32,32,32,32,32,32,32,32,32,32,124,32,73,70,10,32,32,32,32,32,32,32,32,32,32,32,124,32,73,70,69,76,83,69,10,32,32,32,32,32,32,32,32,32,32,32,124,32,87,72,73,76,69,10,32,32,32,32,32,32,32,32,32,32,32,124,32,69,77,73,84,32,115,99,10,32,32,32,32,32,32,32,32,32,32,32,124,32,82,65,78,68,32,115,99,10,10,83,84,69,80,83,32,32,32,32,32,45,62,32,66,82,65,67,69,83,84,77,84,83,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,83,79,76,79,83,84,77,84,10,9,9,32,32,32,124,32,115,99,10,10,35,32,100,101,99,108,97,114,105,110,103,32,118,97,114,105,97,98,108,101,115,10,68,69,67,76,84,89,80,69,32,32,45,62,32,70,85,78,84,89,80,69,32,124,32,79,84,72,69,82,84,89,80,69,10,32,32,32,32,32,32,32,32,32,10,10,68,69,67,76,73,68,32,32,32,32,45,62,32,105,100,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,65,83,83,73,71,78,10,68,69,67,76,73,68,83,32,32,32,45,62,32,68,69,67,76,73,68,10,32,32,32,32,32,32,32,32,32,32,32,124,32,68,69,67,76,73,68,83,32,99,111,109,109,97,32,68,69,67,76,73,68,10,68,69,67,76,76,73,83,84,32,32,45,62,32,68,69,67,76,84,89,80,69,32,68,69,67,76,73,68,83,32,10,10,35,32,97,115,115,105,103,110,109,101,110,116,10,65,83,83,73,71,78,32,32,32,32,45,62,32,105,100,32,97,115,115,105,103,110,32,69,88,80,82,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,105,100,32,97,115,115,105,103,110,32,65,83,83,73,71,78,10,10,35,32,99,111,110,116,114,111,108,32,115,116,114,117,99,116,117,114,101,115,10,73,70,32,32,32,32,32,32,32,32,45,62,32,105,102,32,108,112,97,114,101,110,32,66,69,88,80,82,32,114,112,97,114,101,110,32,83,84,69,80,83,10,73,70,69,76,83,69,32,32,32,32,45,62,32,105,102,32,108,112,97,114,101,110,32,66,69,88,80,82,32,114,112,97,114,101,110,32,66,82,65,67,69,83,84,77,84,83,32,101,108,115,101,32,83,84,69,80,83,10,87,72,73,76,69,32,32,32,32,32,45,62,32,119,104,105,108,101,32,108,112,97,114,101,110,32,66,69,88,80,82,32,114,112,97,114,101,110,32,83,84,69,80,83,10,68,79,87,72,73,76,69,32,32,32,45,62,32,100,111,32,66,82,65,67,69,83,84,77,84,83,32,119,104,105,108,101,32,108,112,97,114,101,110,32,66,69,88,80,82,32,114,112,97,114,101,110,32,115,99,10,10,69,88,80,82,32,32,32,32,32,32,45,62,32,66,69,88,80,82,32,124,32,65,69,88,80,82,32,124,32,70,85,78,67,65,76,76,10,10,35,32,102,117,110,99,116,105,111,110,32,99,97,108,108,115,10,70,85,78,67,65,76,76,32,32,32,45,62,32,105,100,32,108,112,97,114,101,110,32,65,82,71,76,73,83,84,32,114,112,97,114,101,110,10,65,82,71,76,73,83,84,32,32,32,45,62,32,65,82,71,76,73,83,84,32,99,111,109,109,97,32,69,88,80,82,10,32,32,32,32,32,32,32,32,32,32,32,124,32,69,88,80,82,10,32,32,32,32,32,32,32,32,32,32,32,124,32,108,97,109,98,100,97,10,10,35,32,98,111,111,108,101,97,110,32,101,120,112,114,101,115,115,105,111,110,115,44,32,116,114,117,101,32,97,110,100,32,102,97,108,115,101,32,97,114,101,32,108,101,120,101,100,32,97,115,32,49,66,44,32,48,66,10,66,79,79,76,83,32,32,32,32,32,45,62,32,108,116,32,124,32,108,101,113,32,124,32,101,113,32,124,32,103,101,113,32,124,32,103,116,10,66,69,88,80,82,32,32,32,32,32,45,62,32,65,69,88,80,82,32,66,79,79,76,83,32,65,69,88,80,82,10,10,35,32,97,114,105,116,104,109,101,116,105,99,32,101,120,112,114,101,115,115,105,111,110,115,10,80,76,85,83,32,32,32,32,32,32,45,62,32,112,108,117,115,32,124,32,109,105,110,117,115,10,84,73,77,69,83,32,32,32,32,32,45,62,32,109,117,108,116,32,124,32,100,105,118,32,124,32,109,111,100,10,65,69,88,80,82,32,32,32,32,32,45,62,32,83,85,77,10,83,85,77,32,32,32,32,32,32,32,45,62,32,83,85,77,32,80,76,85,83,32,80,82,79,68,85,67,84,10,32,32,32,32,32,32,32,32,32,32,32,124,32,80,82,79,68,85,67,84,10,80,82,79,68,85,67,84,32,32,32,45,62,32,80,82,79,68,85,67,84,32,84,73,77,69,83,32,86,65,76,85,69,10,32,32,32,32,32,32,32,32,32,32,32,124,32,86,65,76,85,69,10,86,65,76,85,69,32,32,32,32,32,45,62,32,108,112,97,114,101,110,32,69,88,80,82,32,114,112,97,114,101,110,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,100,111,109,97,105,110,32,108,112,97,114,101,110,32,69,88,80,82,32,114,112,97,114,101,110,10,32,32,32,32,32,32,32,32,32,32,32,124,32,105,110,116,118,97,108,10,32,32,32,32,32,32,32,32,32,32,32,124,32,102,108,111,97,116,118,97,108,10,32,32,32,32,32,32,32,32,32,32,32,124,32,115,116,114,105,110,103,118,97,108,10,32,32,32,32,32,32,32,32,32,32,32,124,32,105,100,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,85,78,65,82,89,10,32,32,32,32,32,32,32,32,32,32,32,124,32,67,65,83,84,10,85,78,65,82,89,32,32,32,32,32,45,62,32,80,76,85,83,32,86,65,76,85,69,10,32,32,32,32,32,32,32,32,32,32,32,124,32,110,111,116,32,86,65,76,85,69,10,32,32,32,32,32,32,32,32,32,32,32,124,32,99,111,109,112,108,32,86,65,76,85,69,10,67,65,83,84,32,32,32,32,32,32,45,62,32,98,111,111,108,32,108,112,97,114,101,110,32,69,88,80,82,32,114,112,97,114,101,110,10,32,32,32,32,32,32,32,32,32,32,32,124,32,105,110,116,32,108,112,97,114,101,110,32,69,88,80,82,32,114,112,97,114,101,110,10,32,32,32,32,32,32,32,32,32,32,32,124,32,102,108,111,97,116,32,108,112,97,114,101,110,32,69,88,80,82,32,114,112,97,114,101,110,10,10,35,32,84,104,101,32,102,105,114,115,116,32,69,77,73,84,32,102,111,114,109,32,119,111,117,108,100,32,112,114,111,100,117,99,101,32,116,104,101,32,115,116,114,105,110,103,32,118,97,114,105,97,98,108,101,32,105,100,32,111,110,32,97,110,32,111,117,116,112,117,116,32,100,101,118,105,99,101,44,10,35,32,116,104,101,32,102,105,114,115,116,32,65,69,88,80,82,32,105,115,32,116,104,101,32,105,110,105,116,105,97,108,32,99,104,97,114,97,99,116,101,114,32,105,110,100,101,120,44,32,116,104,101,32,115,101,99,111,110,100,32,65,69,88,80,82,32,105,115,32,116,104,101,10,35,32,110,117,109,98,101,114,32,111,102,32,99,104,97,114,97,99,116,101,114,115,32,116,111,32,101,109,105,116,46,10,35,32,84,104,101,32,115,101,99,111,110,100,32,69,77,73,84,32,102,111,114,109,32,112,114,111,100,117,99,101,115,32,116,104,101,32,65,69,88,80,82,32,118,97,108,117,101,32,111,110,32,97,110,32,111,117,116,112,117,116,32,100,101,118,105,99,101,46,32,10,35,32,79,110,32,32,101,109,105,116,32,115,121,109,116,97,98,108,101,44,32,119,114,105,116,101,32,116,104,101,32,99,117,114,114,101,110,116,32,115,121,109,98,111,108,32,116,97,98,108,101,32,116,111,32,116,104,101,32,116,104,105,114,100,32,99,111,109,109,97,110,100,32,108,105,110,101,10,35,32,97,114,103,117,109,101,110,116,32,112,114,111,118,105,100,101,100,32,116,111,32,90,79,66,79,83,10,69,77,73,84,32,32,32,32,32,32,45,62,32,101,109,105,116,32,105,100,32,99,111,109,109,97,32,65,69,88,80,82,32,99,111,109,109,97,32,65,69,88,80,82,10,32,32,32,32,32,32,32,32,32,32,32,124,32,101,109,105,116,32,108,112,97,114,101,110,32,65,69,88,80,82,32,114,112,97,114,101,110,10,32,32,32,32,32,32,32,32,32,32,32,124,32,101,109,105,116,32,115,121,109,116,97,98,108,101,10,10,35,32,73,102,32,105,100,32,105,115,32,97,32,102,108,111,97,116,58,32,115,116,111,114,101,115,32,97,32,85,110,105,102,111,114,109,40,48,44,49,41,32,118,97,108,117,101,115,10,35,32,73,102,32,105,100,32,105,115,32,97,32,98,111,111,108,58,32,32,115,116,111,114,101,115,32,97,32,66,101,114,110,111,117,108,108,105,32,114,101,115,117,108,116,44,32,79,110,101,32,111,114,32,90,101,114,111,10,35,32,73,102,32,105,100,32,105,115,32,97,110,32,105,110,116,58,32,32,114,101,113,117,105,114,101,115,32,116,119,111,32,111,116,104,101,114,32,65,69,88,80,82,32,97,114,103,115,32,116,104,97,116,32,114,101,115,111,108,118,101,32,116,111,32,105,110,116,101,103,101,114,32,118,97,108,117,101,115,44,10,35,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,115,116,111,114,101,115,32,97,110,32,69,113,117,97,108,105,107,101,108,121,40,97,44,98,41,32,118,97,108,117,101,32,105,110,32,116,104,101,32,102,105,114,115,116,32,105,100,101,110,116,105,102,105,101,114,10,82,65,78,68,32,32,32,32,32,32,45,62,32,114,97,110,100,32,105,100,32,10,32,32,32,32,32,32,32,32,32,32,32,124,32,114,97,110,100,32,105,100,32,99,111,109,109,97,32,65,69,88,80,82,32,99,111,109,109,97,32,65,69,88,80,82,10])));let r;!function(e){class ZNode extends Tree{constructor(){super(...arguments),this.name=this.constructor.name}get[Graphviz.label](){return this.name}}e.ZNode=ZNode;class ExpressionNode extends ZNode{}e.ExpressionNode=ExpressionNode;e.BinaryOp=class BinaryOp extends ExpressionNode{constructor(e,t,r){super(),this.name=e,this.lhs=t,this.rhs=r}};e.UnaryOp=class UnaryOp extends ExpressionNode{constructor(e,t){super(),this.name=e,this.val=t}};class CastNode extends ExpressionNode{constructor(e,t){super(),this.type=e,this.val=t}get[Graphviz.label](){return this.type[Graphviz.label]}get[Graphviz.children](){return[["",this.val]]}}e.CastNode=CastNode;class ParameterNode extends ZNode{constructor(e,t){super(),this.type=e,this.name=t}get[Graphviz.label](){return`${this.type[Graphviz.label]} ${this.name}`}get[Graphviz.children](){return[]}}e.ParameterNode=ParameterNode;class FunctionHeaderNode extends ZNode{constructor(e,t,r){super(),this.name=e,this.rtype=t,this.parameters=r}get[Graphviz.label](){return`fn ${this.name}(...)`}}e.FunctionHeaderNode=FunctionHeaderNode;class TypeNode extends ZNode{constructor(e,t){super(),this.type=e,this.meta=t}get[Graphviz.label](){return`${this.meta.const?"const ":""}${this.type}`}get[Graphviz.children](){return[]}}e.TypeNode=TypeNode;class FunctionCallNode extends ExpressionNode{constructor(e,t){super(),this.name=e,this.args=t}get[Graphviz.label](){return`${this.name}(...)`}}e.FunctionCallNode=FunctionCallNode;class FunctionNode extends ZNode{constructor(e,t,r,n){super(),this.header=e,this.rvar=t,this.rvalue=r,this.body=n}get[Graphviz.label](){return`${this.header[Graphviz.label]} {...}`}get[Graphviz.children](){return[["header",this.header],["var",new n("id",this.rvar)],["rvalue",this.rvalue],["body",this.body]]}}e.FunctionNode=FunctionNode;class Program extends ZNode{constructor(e){super(),this.children=e}get[Graphviz.label](){return"Program.z"}get[Graphviz.children](){return this.children.map(((e,t)=>[`statements[${t}]`,e]))}}e.Program=Program;class DomainNode extends ExpressionNode{constructor(e){super(),this.value=e}get[Graphviz.label](){return"Domain"}get[Graphviz.children](){return[["",this.value]]}}e.DomainNode=DomainNode;class StatementNode extends ZNode{constructor(){super()}get[Graphviz.label](){return"Statement"}}e.StatementNode=StatementNode;class DeclareStatement extends StatementNode{constructor(e,t){super(),this.type=e,this.entries=t}get[Graphviz.label](){return"Declare"}get[Graphviz.children](){return[...Object.entries({type:this.type}),...this.entries.map((function(e,t){return 1===e.length?["",new n("id",e[0])]:["",{get[Graphviz.label](){return"="},get[Graphviz.children](){return[["",new n("id",e[0])],["",e[1]]]}}]}))]}}e.DeclareStatement=DeclareStatement;class AssignmentStatement extends StatementNode{constructor(e,t){super(),this.id=e,this.value=t}get[Graphviz.label](){return"="}get[Graphviz.children](){return[["id",new n("id",this.id)],...Object.entries({value:this.value})]}}e.AssignmentStatement=AssignmentStatement;class IfStatement extends StatementNode{constructor(e,t,r){super(),this.predicate=e,this.btrue=t,this.bfalse=r}get[Graphviz.label](){return void 0!==this.bfalse?"If-Else":"If"}}e.IfStatement=IfStatement;class DoWhileStatement extends StatementNode{constructor(e,t){super(),this.body=e,this.predicate=t}get[Graphviz.label](){return"Do While"}}e.DoWhileStatement=DoWhileStatement;class WhileStatement extends StatementNode{constructor(e,t){super(),this.predicate=e,this.body=t}get[Graphviz.label](){return"While"}}e.WhileStatement=WhileStatement;class EmitStatement extends StatementNode{constructor(e){super(),this.data=e}get[Graphviz.label](){return"Emit"}get[Graphviz.children](){return[..."string"===this.data.type?[["id",new n("id",this.data.id)]]:[],...Object.entries(this.data)]}}e.EmitStatement=EmitStatement;class RandStatement extends StatementNode{constructor(e,t,r){super(),this.id=e,this.min=t,this.max=r}get[Graphviz.label](){return"Rand"}get[Graphviz.children](){return[["id",new n("id",this.id)],void 0!==this.min?["min",this.min]:[],void 0!==this.max?["max",this.max]:[]]}}e.RandStatement=RandStatement;class StatementGroup extends StatementNode{constructor(e){super(),this.statements=e}get[Graphviz.label](){return"Statements"}}e.StatementGroup=StatementGroup}(r||(r={}));var n=Parsing.ParseTreeTokenNode;e.sdt=new Parsing.SyntaxTransformer({"*":e=>1===e.length?e.at(0)instanceof Parsing.ParseTreeLambdaNode?null:e.pop():e.name.endsWith("'")?e.splice(0,e.length):void 0,"SUM|PRODUCT|BEXPR"(e){if(1!==e.length)return new r.BinaryOp(e.at(1).value,e.shift(),e.pop())},UNARY(e){if(1!==e.length)return new r.UnaryOp(e.at(0).value,e.pop())},CAST:e=>new r.CastNode(e.at(0),e.at(2)),FUNSIG:e=>new r.FunctionHeaderNode(e.at(1).value,e.at(0),e.children.splice(3,e.length-4)),PARAMLIST(e){if(1!==e.length)return 2===e.length?new r.ParameterNode(e.at(0),e.at(1).value):[new r.ParameterNode(e.at(0),e.at(1).value),...e.splice(3,e.length)]},FUNCALL:e=>new r.FunctionCallNode(e.at(0).value,e.splice(2,e.length-3)),ARGLIST(e){if(1!==e.length)return e.splice(-2,1),e.splice(0,e.length)},FUNCTION:e=>new r.FunctionNode(e.splice(0,1)[0],e.at(1).value,e.splice(-2,1)[0],e.splice(-1,1)[0]),"OTHERTYPE|FUNTYPE":e=>new r.TypeNode(e.at(-1).value,{const:e.length>1&&"const"===e.at(0).value}),MODULE:e=>new r.Program(e.splice(0,e.length-1)),MODPARTS:e=>e.splice(0,e.length).filter((e=>!(e instanceof n)||"sc"!==e.name)),VALUE:e=>3===e.length?e.splice(1,1):4===e.length?new r.DomainNode(e.splice(2,1)[0]):void 0,BSTMT:e=>e.splice(0,1),BSTMTS(e){if(1!==e.length)return e.splice(0,e.length)},BRACESTMTS:e=>new r.StatementGroup(e.splice(1,e.length-2)),SOLOSTMT:e=>new r.StatementGroup(e.splice(0,1)),ASSIGN:e=>new r.AssignmentStatement(e.at(0).value,e.splice(-1,1)[0]),"GFTDECLLIST|GOTDECLLIST|DECLLIST":e=>new r.DeclareStatement(e.splice(0,1)[0],e.splice(0,e.length).map((e=>e instanceof r.AssignmentStatement?[e.id,e.value]:[e.value]))),DECLIDS:e=>e.splice(0,e.length).filter((e=>!(e instanceof n)||"comma"!==e.name)),WHILE:e=>new r.WhileStatement(e.splice(2,1)[0],e.splice(-1,1)[0]),DOWHILE:e=>new r.DoWhileStatement(e.splice(1,1)[0],e.splice(-3,1)[0]),IF:e=>new r.IfStatement(e.splice(2,1)[0],e.splice(-1,1)[0]),IFELSE:e=>new r.IfStatement(e.splice(2,1)[0],e.splice(-3,1)[0],e.splice(-1,1)[0]),EMIT(e){switch(e.length){case 2:return new r.EmitStatement({type:e.at(-1).value});case 4:return new r.EmitStatement({type:"value",value:e.splice(2,1)[0]});case 6:return new r.EmitStatement({type:"string",id:e.at(1).value,index:e.splice(3,1)[0],length:e.splice(-1,1)[0]})}},RAND(e){switch(e.length){case 2:return new r.RandStatement(e.at(1).value);case 6:return new r.RandStatement(e.at(1).value,e.splice(3,1)[0],e.splice(-1,1)[0])}}}),console.debug("Building Parser...");const s=new SLR1.SLR1Parser(t,e.sdt,"zlang.json.lz");console.debug("Done!"),e.parse=function(e){return s.parse(e)}}(ZLang||(ZLang={})),function(e){function t(e){const t=new Map;for(const r of e.getNonTerminals()){const n=new Set(e.getRuleListFor(r));t.set(r,[]);for(const[s,i,o]of n.values().map((e=>[...e,e]))){if(i.length<1){t.get(r).push(i);continue}const s=i[0],a=CFG.makeUniqueNonTerminal(e,r);let l=!1;for(const[e,r,o]of n.values().map((e=>[...e,e]))){const e=r[0];i!==r&&s===e&&(l||t.set(a,[]),l=!0,t.get(a).push(r.slice(1)),n.delete(o))}l?(t.get(a).push(i.slice(1)),t.get(r).push([s,a]),n.delete(o)):t.get(r).push(i)}}return new CFG(e.startingSymbol,t,new Set(e.getTerminals()))}function r(e){let r;do{r=e.getRuleList().length,e=t(e)}while(r!=e.getRuleList().length);return function(e){const t=new Map;function r(e,t){let r=[],n=-1;for(;e.at(n)===t.at(n)&&void 0!==e.at(n);)r.unshift(e.at(n--));return r}function n(e,t){return e.length===t.length&&e.every(((e,r)=>e===t[r]))}for(const s of e.getNonTerminals()){const i=new Set(e.getRuleListFor(s).sort((([e,t],[r,n])=>n.length-t.length)));t.set(s,[]);e:for(const[o,a,l]of i.values().map((e=>[...e,e]))){if(a[0]===o)for(const[o,c,u]of i.values().map((e=>[...e,e]))){if(a===c)continue;const o=r(a,c);if(n(c,o)){const r=a.slice(1,a.length-o.length);i.delete(l),i.delete(u);const n=CFG.makeUniqueNonTerminal(e,s);t.get(s).push([...o,n]),t.set(n,[[...r,...o,n],[]]);continue e}}t.get(s).push(a)}}return new CFG(e.startingSymbol,t,new Set(e.getTerminals()))}(e)}e.LL1Parser=class LL1Parser{constructor(e,t){this.cfg=r(e),this.parseTable=function(e){const t=new Map(e.getNonTerminals().map((t=>[t,new Map(e.getTerminalsAndEOF().map((e=>[e,-1])))])));let r=0;for(const n of e.getNonTerminals()){const s=e.getRuleListFor(n).map((([e,t])=>t)),i=t.get(n);for(const t of s){const s=e.predictSet([n,t]);for(const e of s){if(-1!=i.get(e))throw new Error(`Grammar is not LL(1) (Caused by rules ${i.get(e)} and ${r})`);i.set(e,r)}r++}}return t}(this.cfg),this.sdt=t}getCFG(){return this.cfg}getParseTable(){return this.parseTable}parse(e){var t,r,a,l,c,u,h,f,d,p,g;const m=this.parseTable,y=this.cfg.getRuleList(),S=createPeekableIterator(e),b=Symbol(),v=new n,w=[];let T,A=v;for(w.push(this.cfg.startingSymbol);w.length;){let e=w.pop();if(e===b){const e=A.parent,t=this.sdt.transform(e.pop());Array.isArray(t)?e.push(...t):null!=t&&e.push(t),A=e}else if(CFG.isNonTerminal(e)){let s=null!==(u=y[null!==(a=null===(t=m.get(e))||void 0===t?void 0:t.get(null===(r=S.peek())||void 0===r?void 0:r.name))&&void 0!==a?a:throws(new Parsing.SyntaxError(`Unexpected token ${null!==(c=null===(l=S.peek())||void 0===l?void 0:l.name)&&void 0!==c?c:"EOF"}`,T))])&&void 0!==u?u:throws(new Parsing.SyntaxError(`Syntax Error: Unexpected token ${null!==(f=null===(h=S.peek())||void 0===h?void 0:h.name)&&void 0!==f?f:"EOF"}`,T));w.push(b);const i=s[1];this.cfg.isStartingRule(s)&&w.push(CFG.EOF),i.length?w.push(...[...i].reverse()):w.push(CFG.LAMBDA_CHARACTER);const o=new n(e);A.push(o),A=A.at(-1)}else if(CFG.isTerminalOrEOF(e)){if(e!==(null===(d=S.peek())||void 0===d?void 0:d.name))throw new Parsing.SyntaxError(`Unexpected token ${null!==(g=null===(p=S.peek())||void 0===p?void 0:p.name)&&void 0!==g?g:"EOF"} expected ${e}`,T);e=S.shift(),T=null==e?void 0:e.pos,A.push(e instanceof Token?new o(e.name,e.value):new i)}else CFG.isLambda(e)&&A.push(new s)}if(1!==v.length)throw new Parsing.SyntaxError(void 0,T);return v.pop()}};var n=Parsing.ParseTreeNode,s=Parsing.ParseTreeLambdaNode,i=Parsing.ParseTreeEOFNode,o=Parsing.ParseTreeTokenNode}(LL1||(LL1={}));var FiniteAutomata,RegexEngine,LL1Parser=LL1.LL1Parser;!function(e){e.NFAContext=class NFAContext{constructor(e){this.alphabet=e,this.iter=function*(e=0){for(;;)yield e++}()}createState(){return this.iter.shift()}createStates(e=1){return[...this.iter.shift(e)]}lambdaWrap(e){const[t,r]=this.createStates(2);return{start:t,end:r,edges:[[t,e.start],...e.edges,[e.end,r]]}}},e.toDFA=function(e,t){function r(t){t=new Set(t);const r=[...t];for(;r.length;){const n=r.pop();for(const s of e.edges.flatMap((function([e,t,r]){return void 0===r&&e===n?[t]:[]})))t.has(s)||(t.add(s),r.push(s))}return s(t)}function n(t,r){const n=new Set;for(const s of t)for(const t of e.edges.flatMap((function([e,t,n]){return n===r&&e===s?[t]:[]})))n.add(t);return s(n)}function s(e){return new Set([...e].sort(((e,t)=>e-t)))}const i=new SignatureMap,o=[],a=s(new Set([e.end])),l=r([e.start]);i.set(l,Object.assign(new Map,{start:!0})),a.intersection(new Set(l)).size&&(i.get(l).accepting=!0),o.push(l);do{const e=o.pop();for(const s of t.alphabet){const t=r(n(e,s));i.get(e).set(s,t),t.size&&!i.has(t)&&(i.set(t,new Map),a.intersection(new Set(t)).size&&(i.get(t).accepting=!0),o.push(t))}}while(o.length);const c=new Map,u=function(){const e=new SignatureMap;let t=0;return function(r){return e.has(r)||e.set(r,t++),e.get(r)}}();for(const[e,t]of i.entries())c.set(u(e),Object.assign(new Map(t.entries().flatMap((([e,t])=>t.size?[[e,u(t)]]:[]))),Object.fromEntries(Object.entries(t))));return c},e.optimizeDFA=function(e,t){const r=e;function n(){const r=e,n=new Set,s=[];s.push([r.entries().filter((([e,t])=>t.accepting)).map((([e])=>e)).toArray(),[...t.alphabet]]),s.push([r.entries().filter((([e,t])=>!t.accepting)).map((([e])=>e)).toArray(),[...t.alphabet]]);do{const[e,t]=s.pop(),i=t.shift(),o=Object.values(Object.groupBy(e,(e=>{var t;return null!==(t=r.get(e).get(i))&&void 0!==t?t:"undefined"})));for(const e of o.filter((e=>e.length>1)))t.length?s.push([e,[...t]]):n.add(e)}while(s.length);for(const e of n){const t=e.shift(),n=r.get(t),s=new Set;for(const t of e)n.accepting||(n.accepting=r.get(t).accepting),r.delete(t),s.add(t);for(const e of r.values())for(const[r,n]of e.entries())s.has(n)&&e.set(r,t)}}let s;!function(){var e;const t=new Set,n=new Map(r.entries().map((([e,t])=>[e,r.entries().flatMap((([t,r])=>r.values().toArray().includes(e)?[t]:[])).toArray()]))),s=r.entries().filter((([e,t])=>t.accepting)).map((([e])=>e)).toArray();for(;s.length;){const r=s.pop();if(!t.has(r)){for(const t of null!==(e=n.get(r))&&void 0!==e?e:[])s.push(t);t.add(r)}}const i=new Set;for(const[e,n]of r.entries())t.has(e)||(i.add(e),r.delete(e));for(const e of r.values())for(const[t,r]of e.entries())i.has(r)&&e.delete(t)}();do{s=r.size,n()}while(s!=r.size);const i=r.keys().reduce(((e,t)=>(e[t]=t,e)),[]).reduce(((e,t)=>[...e,t]),[]);for(const[e,t]of[...r.entries()]){r.delete(e);const n=i.indexOf(e);r.set(n,t);for(const[e,r]of t)t.set(e,i.indexOf(r))}return e}}(FiniteAutomata||(FiniteAutomata={})),function(e){var t=FiniteAutomata.NFAContext;let r;!function(e){var t,r;class RegexNode extends Tree{constructor(){super(...arguments),this.name=this.constructor.name}}e.RegexNode=RegexNode;e.AltNode=class AltNode extends RegexNode{constructor(e){super(),this.nodes=e}getChildNodes(){return[...this.nodes]}clone(){return new this.constructor(this.nodes.map((e=>e.clone())))}toNFA(e){const[t,r]=e.createStates(2),n={start:t,end:r,edges:[]};for(const s of this.nodes[Symbol.iterator]().map((t=>t.toNFA(e))))n.edges.push([t,s.start]),n.edges.push(...s.edges),n.edges.push([s.end,r]);return e.lambdaWrap(n)}};e.SeqNode=class SeqNode extends RegexNode{constructor(e){super(),this.nodes=e}getChildNodes(){return[...this.nodes]}clone(){return new this.constructor(this.nodes.map((e=>e.clone())))}toNFA(e){const[t,r]=e.createStates(2),n={start:t,end:r,edges:[]};let s=n.start;for(const t of this.nodes[Symbol.iterator]().map((t=>t.toNFA(e))))n.edges.push([s,t.start]),n.edges.push(...t.edges),s=t.end;return n.edges.push([s,n.end]),e.lambdaWrap(n)}};class RangeNode extends RegexNode{constructor(e,t){super(),this.min=e,this.max=t}get[Graphviz.children](){return{min:Graphviz.text(this.min),max:Graphviz.text(this.max)}}clone(){return new this.constructor(this.min,this.max)}toNFA(e){const[t,r]=e.createStates(2);return e.lambdaWrap({start:t,end:r,edges:range(this.min,this.max).filter((t=>e.alphabet.has(t))).map((e=>[t,r,e])).toArray()})}}e.RangeNode=RangeNode;t=Graphviz.label,e.KleenNode=class KleenNode extends RegexNode{constructor(e){super(),this.node=e,this[t]="*"}clone(){return new this.constructor(this.node.clone())}toNFA(e){const t=e.createState(),r={start:t,end:t,edges:[]},n=this.node.toNFA(e);return r.edges.push([t,n.start]),r.edges.push(...n.edges),r.edges.push([n.end,t]),e.lambdaWrap(r)}};class CharNode extends RegexNode{constructor(e){super(),this.char=e}get[Graphviz.label](){return this.char}clone(){return new this.constructor(this.char)}toNFA(e){const[t,r]=e.createStates(2);return e.lambdaWrap({start:t,end:r,edges:[[t,r,this.char]]})}}e.CharNode=CharNode;e.WildcharNode=class WildcharNode extends RegexNode{clone(){return new this.constructor}toNFA(e){const[t,r]=e.createStates(2);return e.lambdaWrap({start:t,end:r,edges:e.alphabet.values().map((e=>[t,r,e])).toArray()})}};r=Graphviz.label,e.LambdaNode=class LambdaNode extends RegexNode{constructor(){super(...arguments),this[r]=CFG.LAMBDA_CHARACTER}clone(){return new this.constructor}toNFA(e){const[t,r]=e.createStates(2);return e.lambdaWrap({start:t,end:r,edges:[[t,r]]})}}}(r||(r={}));var n=r.RegexNode;const s=CFG.fromString((new BasicTextDecoder).decode(new Uint8Array([83,32,45,62,32,82,101,103,101,120,32,36,13,10,13,10,82,101,103,101,120,32,45,62,32,65,108,116,101,114,110,97,116,105,111,110,13,10,13,10,65,108,116,101,114,110,97,116,105,111,110,32,45,62,32,65,108,116,101,114,110,97,116,105,111,110,32,37,124,32,83,101,113,117,101,110,99,101,13,10,32,32,32,32,32,32,32,32,32,32,32,32,124,32,83,101,113,117,101,110,99,101,13,10,83,101,113,117,101,110,99,101,32,45,62,32,83,101,113,117,101,110,99,101,32,81,117,97,110,116,105,102,105,101,114,32,124,32,206,187,13,10,32,32,32,32,32,32,32,32,32,32,32,32,124,32,81,117,97,110,116,105,102,105,101,114,13,10,81,117,97,110,116,105,102,105,101,114,32,45,62,32,80,114,105,109,97,114,121,32,37,42,13,10,32,32,32,32,32,32,32,32,32,32,32,32,124,32,80,114,105,109,97,114,121,32,37,43,13,10,32,32,32,32,32,32,32,32,32,32,32,32,124,32,80,114,105,109,97,114,121,13,10,13,10,80,114,105,109,97,114,121,32,45,62,32,80,114,105,109,105,116,105,118,101,32,124,32,37,40,32,82,101,103,101,120,32,37,41,13,10,80,114,105,109,105,116,105,118,101,32,45,62,32,99,104,97,114,32,124,32,99,104,97,114,32,37,45,32,99,104,97,114,32,124,32,37,46]))),i=new LL1Parser(s,new Parsing.SyntaxTransformer({"*":e=>1===e.length?e.at(0)instanceof Parsing.ParseTreeLambdaNode?null:e.pop():e.name.endsWith("'")?e.splice(0,e.length):void 0,Primitive(e){const[t,,n]=[...e];return"char"===t.name&&"char"===(null==n?void 0:n.name)?new r.RangeNode(t.value,n.value):"char"===t.name?new r.CharNode(t.value):"%."===t.name?new r.WildcharNode:void 0},Sequence:e=>1===e.length?e.shift():new r.SeqNode([...e].flatMap((e=>e instanceof r.SeqNode?e.getChildNodes():[e]))),Alternation(e){const t=e.length,s=e.splice(0,e.length).filter((e=>e instanceof n));return 2*s.length-1!==t&&s.push(new r.LambdaNode),new r.AltNode(s)},Quantifier(e){const t=e.at(1);if(t instanceof Parsing.ParseTreeTokenNode)switch(t.name){case"%+":return new r.SeqNode([e.at(0),new r.KleenNode(e.shift().clone())]);case"%*":return new r.KleenNode(e.shift())}},Primary:e=>1===e.length?e.shift():e.splice(1,1),S:e=>e.shift()}));function o(e){return e.split("").every((e=>"0123456789abcdef".includes(e.toLowerCase())))}function*a(e){const t=e[Symbol.iterator]();let r,n=0,s=1;for(;void 0!==(r=t.shift());){switch(r){case"\\":{const e=t.shift();switch(e){case"\\":case"(":case")":case"+":case"*":case"-":case".":case"|":yield new Token("char",e,{line:s,col:n});break;case"s":yield new Token("char"," ",{line:s,col:n});break;case"n":yield new Token("char","\n",{line:s,col:n});break;case"u":const r=t.take(4).toArray().join(""),i=Number.parseInt(r,16);if(4!=r.length||!o(r)||Number.isNaN(i))throw new Error(`Invalid unicode escape sequence '\\u${r}'`);yield new Token("char",String.fromCharCode(i),{line:s,col:n});break;default:throw new Error(`Unknown escape sequence '\\${e}'`)}break}case"(":case")":case"+":case"*":case"-":case".":case"|":yield new Token("%"+r,r,{line:s,col:n});break;default:yield new Token("char",r,{line:s,col:n})}"\n"===r&&s++,n++}}e.tokenize=a,e.parse=function(e){return i.parse(a(e))},e.compile=function(r,n){const s=new t(n),[i,o]=s.createStates(2),a=e.parse(r).toNFA(s);return{start:i,end:o,edges:[[i,a.start],...a.edges,[a.end,o]]}}}(RegexEngine||(RegexEngine={}));class Scanner{constructor(e,t,r){this.alphabet=e,this.lambdaChar=t,this.patterns=r}static fromString(e,t){try{if(void 0!==t){const{signature:r,alphabet:n,patterns:s,lambdaChar:i}=JSON.parse(LZCompression.decompressFromUint8Array(system.readFileSync(t)));if(Signature.create(e)===r)return new Scanner(new Set(n),i,new Map(s.map((([e,{dfa:t,value:r}])=>[e,{dfa:new Map(t.map((([e,t])=>[e,new Map(t)]))),value:r}]))))}}catch(e){}const r=e.split("\n").map((e=>e.trim())).filter((e=>e&&!e.startsWith("#"))),n=new Set(r.shift().split(/\s+/g).flatMap((e=>alphaDecode(e).split("")))),s=function(e){for(const t of range(String.fromCharCode(1),String.fromCharCode(127)))if(!e.has(t))return t;throw new Error("No sutible lambda ascii character found!")}(new Set(n)),i=new Map,o=new FiniteAutomata.NFAContext(n);for(const e of r){const[t,r,s]=e.split(/\s+/g),a=RegexEngine.compile(t,n),l=FiniteAutomata.optimizeDFA(FiniteAutomata.toDFA(a,o),o);i.set(r,{dfa:l,value:null!=s?s:r})}const a=new Scanner(n,s,i);try{void 0!==t&&system.writeFileSync(t,LZCompression.compressToUint8Array(JSON.stringify({signature:Signature.create(e),alphabet:[...a.alphabet],patterns:a.patterns.entries().map((([e,{dfa:t,value:r}])=>[e,{dfa:t.entries().map((([e,t])=>[e,t.entries().toArray()])).toArray(),value:r}])).toArray(),lambdaCharacter:s})))}catch(e){}return a}*tokenize(e){var t,r;class TokenMatcher{constructor(e,t){this.type=e,this.dfa=t,this.state=0}reset(){this.state=0}accept(e){var t;this.state!==TokenMatcher.NO_MATCH&&(this.state=null!==(t=this.dfa.get(this.state).get(e))&&void 0!==t?t:TokenMatcher.NO_MATCH)}isComplete(){var e;return this.state!==TokenMatcher.NO_MATCH&&(null===(e=this.dfa.get(this.state))||void 0===e?void 0:e.accepting)}getType(){return this.type}isFailed(){return this.state===TokenMatcher.NO_MATCH}}TokenMatcher.NO_MATCH=-1;const n=new Tape(e);let s,i=this.patterns.entries().map((([e,{value:t,dfa:r}])=>new TokenMatcher({name:e,value:t},r))).toArray(),o=null,a={line:1,col:1},l={...a},c=[];for(;(s=n.next())||c.length;){s&&(c.push(s),i.forEach((e=>e.accept(s))));const e=null!==(t=i.find((e=>e.isComplete())))&&void 0!==t?t:null;if(i.every((e=>e.isFailed()))||!s){if(!o)throw new Error("Language matched nothing!");yield new Token(o[0].name,null!==(r=o[0].value)&&void 0!==r?r:c.slice(0,o[1]).join(""),{...l}),i.forEach((e=>e.reset())),n.rewind(c.length-o[1]),n.erase(),c=[],l=o[2],a={...l},o=null}else a.col++,"\n"===s&&(a.line++,a.col=1),o=e?[e.getType(),c.length,{...a}]:o}}}!function(e){console.log("Building Scanner...");const t=Scanner.fromString((new BasicTextDecoder).decode(new Uint8Array([120,48,97,32,120,50,48,32,120,50,49,32,120,50,50,32,32,120,50,51,32,32,120,50,52,32,32,120,50,53,32,32,120,50,54,32,32,120,50,55,32,32,120,50,56,32,32,120,50,57,32,32,120,50,97,32,120,50,98,32,120,50,99,32,120,50,100,32,120,50,101,32,120,50,102,32,48,32,49,32,50,32,51,32,52,32,53,32,54,32,55,32,56,32,57,32,120,51,97,32,120,51,98,32,120,51,99,32,120,51,100,32,120,51,101,32,120,51,102,32,120,52,48,32,32,65,32,66,32,67,32,68,32,69,32,70,32,71,32,72,32,73,32,74,32,75,32,76,32,77,32,78,32,79,32,80,32,81,32,82,32,83,32,84,32,85,32,86,32,87,32,88,32,89,32,90,32,120,53,98,32,120,53,100,32,120,53,101,32,120,53,102,32,120,54,48,32,32,97,32,98,32,99,32,100,32,101,32,102,32,103,32,104,32,105,32,106,32,107,32,108,32,109,32,110,32,111,32,112,32,113,32,114,32,115,32,116,32,117,32,118,32,119,32,120,55,56,32,121,32,122,32,120,55,98,32,120,55,99,32,120,55,100,32,120,55,101,32,13,10,40,92,110,124,92,115,41,42,35,40,92,115,124,33,124,35,124,36,124,37,124,38,124,39,124,92,40,124,92,41,124,92,42,124,92,43,124,44,124,92,45,124,92,46,124,47,124,48,124,49,124,50,124,51,124,52,124,53,124,54,124,55,124,56,124,57,124,58,124,59,124,60,124,61,124,62,124,63,124,64,124,65,124,66,124,67,124,68,124,69,124,70,124,71,124,72,124,73,124,74,124,75,124,76,124,77,124,78,124,79,124,80,124,81,124,82,124,83,124,84,124,85,124,86,124,87,124,88,124,89,124,90,124,91,124,93,124,94,124,95,124,96,124,97,124,98,124,99,124,100,124,101,124,102,124,103,124,104,124,105,124,106,124,107,124,108,124,109,124,110,124,111,124,112,124,113,124,114,124,115,124,116,124,117,124,118,124,119,124,120,124,121,124,122,124,123,124,92,124,124,125,124,126,41,42,32,32,32,69,79,76,67,79,77,77,69,78,84,32,32,13,10,47,92,42,40,47,124,40,92,115,124,33,124,35,124,36,124,37,124,38,124,39,124,92,40,124,92,41,124,92,43,124,44,124,92,45,124,92,46,124,48,124,49,124,50,124,51,124,52,124,53,124,54,124,55,124,56,124,57,124,58,124,59,124,60,124,61,124,62,124,63,124,64,124,65,124,66,124,67,124,68,124,69,124,70,124,71,124,72,124,73,124,74,124,75,124,76,124,77,124,78,124,79,124,80,124,81,124,82,124,83,124,84,124,85,124,86,124,87,124,88,124,89,124,90,124,91,124,93,124,94,124,95,124,96,124,97,124,98,124,99,124,100,124,101,124,102,124,103,124,104,124,105,124,106,124,107,124,108,124,109,124,110,124,111,124,112,124,113,124,114,124,115,124,116,124,117,124,118,124,119,124,120,124,121,124,122,124,123,124,92,124,124,125,124,126,41,124,92,42,43,95,95,80,73,95,95,41,42,92,42,43,47,32,32,73,78,76,73,78,69,67,83,84,89,76,69,67,79,77,77,69,78,84,32,13,10,99,111,110,115,116,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,111,110,115,116,13,10,98,111,111,108,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,98,111,111,108,13,10,105,110,116,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,110,116,13,10,115,116,114,105,110,103,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,115,116,114,105,110,103,13,10,102,108,111,97,116,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,102,108,111,97,116,13,10,105,102,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,105,102,13,10,101,108,115,101,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,108,115,101,13,10,119,104,105,108,101,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,119,104,105,108,101,13,10,101,109,105,116,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,109,105,116,13,10,115,121,109,116,97,98,108,101,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,115,121,109,116,97,98,108,101,13,10,114,101,116,117,114,110,115,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,101,116,117,114,110,115,13,10,114,97,110,100,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,97,110,100,13,10,40,95,124,97,45,122,124,65,45,90,41,40,95,124,97,45,122,124,65,45,90,124,48,45,57,41,42,32,105,100,13,10,40,40,49,45,57,41,40,48,45,57,41,42,41,124,48,32,32,32,32,32,32,32,32,32,32,32,32,105,110,116,118,97,108,13,10,40,48,45,57,43,92,46,48,45,57,43,124,48,45,57,43,92,46,48,45,57,42,41,32,32,32,32,102,108,111,97,116,118,97,108,13,10,34,40,92,115,124,33,124,35,124,36,124,37,124,38,124,39,124,92,40,124,92,41,124,92,42,124,92,43,124,44,124,92,45,124,92,46,124,47,124,48,124,49,124,50,124,51,124,52,124,53,124,54,124,55,124,56,124,57,124,58,124,59,124,60,124,61,124,62,124,63,124,64,124,65,124,66,124,67,124,68,124,69,124,70,124,71,124,72,124,73,124,74,124,75,124,76,124,77,124,78,124,79,124,80,124,81,124,82,124,83,124,84,124,85,124,86,124,87,124,88,124,89,124,90,124,91,124,93,124,94,124,95,124,96,124,97,124,98,124,99,124,100,124,101,124,102,124,103,124,104,124,105,124,106,124,107,124,108,124,109,124,110,124,111,124,112,124,113,124,114,124,115,124,116,124,117,124,118,124,119,124,120,124,121,124,122,124,123,124,92,124,124,125,124,126,41,43,34,32,32,32,32,32,32,115,116,114,105,110,103,118,97,108,13,10,60,61,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,108,101,113,13,10,61,61,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,101,113,13,10,62,61,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,103,101,113,13,10,61,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,115,115,105,103,110,13,10,62,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,103,116,13,10,60,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,108,116,13,10,92,43,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,112,108,117,115,13,10,92,45,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,109,105,110,117,115,13,10,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,110,111,116,13,10,126,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,111,109,112,108,13,10,92,42,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,109,117,108,116,13,10,47,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,100,105,118,13,10,37,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,109,111,100,13,10,59,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,115,99,13,10,123,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,108,98,114,97,99,101,13,10,125,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,98,114,97,99,101,13,10,92,40,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,108,112,97,114,101,110,13,10,92,41,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,114,112,97,114,101,110,13,10,44,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,99,111,109,109,97,13,10,40,92,115,124,92,110,41,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,73,71,78,79,82,69,13,10])),"zlex.json.lz");console.log("Done!"),e.tokenizeFile=async function*(e){const r=await system.createTextFileReadStream(e);yield*t.tokenize(function*(){for(;;)yield r.read(1)}())},e.tokenize=function(e){return t.tokenize(e.split("")[Symbol.iterator]())}}(ZLang||(ZLang={})),console.log("Tokens:"),console.log(ZLang.tokenize("\n1+1\n").toArray().join("\n"));